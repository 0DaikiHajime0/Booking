<section>
    <p class="header">Recursos</p>
</section>
<div class="busqueda">
    <mat-form-field appearance="fill">
        <input
        matInput
        (keyup)="aplicarFiltro($any($event.target).value)"
        placeholder="Buscar"
        #input
      />
    </mat-form-field>
    <div class="botones">
        <button mat-raised-button color="primary" class="botones-nuevo" (click)="crearRecurso()">Crear Nuevo Recurso</button>
        <div *ngIf="asignaturas.length === 0 && recursoSeleccionado < 1">
            <span>Selecciona un recurso para ver sus asignaturas asociadas</span>
        </div>
        <div *ngIf="asignaturas.length === 0 && recursoSeleccionado >= 1">
            <span>No hay asignaturas asociadas a este recurso</span>
        </div>
    </div>
</div>
<div class="contenido">
    <div class="contenido-tabla">
        <table mat-table [dataSource]="dataSource" matSort  class="mat-elevation-z2" >
            <ng-container matColumnDef="recurso_id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
                    <td mat-cell *matCellDef="let recurso"[class.selected-row]="recursoSeleccionado === recurso.recurso_id" > 
                        <button class="boton-seleccionar" (click)="seleccionarRecurso(recurso)">
                            {{recurso.recurso_id}} 
                        </button>
                    </td>
            </ng-container>
            <ng-container matColumnDef="recurso_nombre">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
                <td mat-cell *matCellDef="let recurso"[class.selected-row]="recursoSeleccionado === recurso.recurso_id" > 
                    <button class="boton-seleccionar" (click)="seleccionarRecurso(recurso)">
                        {{recurso.recurso_nombre}} 
                    </button>
                </td>
            </ng-container>
            <ng-container matColumnDef="recurso_estado">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
                <td mat-cell *matCellDef="let recurso" [class.selected-row]="recursoSeleccionado === recurso.recurso_id"> {{recurso.recurso_estado}} </td>
            </ng-container>
            <ng-container matColumnDef="recurso_empresa">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Empresa</th>
                <td mat-cell *matCellDef="let recurso" [class.selected-row]="recursoSeleccionado === recurso.recurso_id"> {{recurso.recurso_empresa}} </td>
            </ng-container>
            <ng-container matColumnDef="recurso_cant_credenciales" >
                <th mat-header-cell *matHeaderCellDef mat-sort-header >Cantidad de Credenciales</th>
                <td mat-cell *matCellDef="let recurso" [class.selected-row]="recursoSeleccionado === recurso.recurso_id"> {{recurso.recurso_cant_credenciales}} </td>
            </ng-container>
            <ng-container matColumnDef="Editar">
                <th mat-header-cell *matHeaderCellDef>Editar</th>
                <td mat-cell *matCellDef="let recurso" [class.selected-row]="recursoSeleccionado === recurso.recurso_id">
                    <button mat-icon-button color="primary"  matTooltip="Editar" (click)="editarRecurso(recurso.recurso_id)">
                        <mat-icon>edit</mat-icon>
                      </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columnas" ></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
        </table>
        <mat-paginator [length]="100"
                  [pageSize]="10"
                  [pageSizeOptions]="[5, 10, 25, 100]"
                  aria-label="Select page">
    </mat-paginator>
    </div>
    <div class="contenido-tabla">
        <table mat-table [dataSource]="dataSourceAsignatura" class="mat-elevation-z2">
            <ng-container matColumnDef="ID">
                <th mat-header-cell *matHeaderCellDef>Id</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.curso_id}} </td>
            </ng-container>
            <ng-container matColumnDef="Nombre">
                <th mat-header-cell *matHeaderCellDef>Nombre</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.curso_nombre}} </td>
            </ng-container>
            <ng-container matColumnDef="Estado">
                <th mat-header-cell *matHeaderCellDef>Estado</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.curso_estado}} </td>
            </ng-container>
            <ng-container matColumnDef="Descripcion">
                <th mat-header-cell *matHeaderCellDef>Descripci√≥n</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.curso_descripcion}} </td>
            </ng-container>
            <ng-container matColumnDef="Cantidad">
                <th mat-header-cell *matHeaderCellDef>Cantidad de Credenciales</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.docente_curso_cantidad_alumnos}} </td>
            </ng-container>
            <ng-container matColumnDef="NRC">
                <th mat-header-cell *matHeaderCellDef>NRC</th>
                <td mat-cell *matCellDef="let asignaturas"> {{asignaturas.nrc}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columnasAsignatura"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasAsignatura;"></tr>
        </table>
    </div>

    
    <mat-progress-spinner class="load-asignaturas" *ngIf="cargando" [diameter]="50" mode="indeterminate"></mat-progress-spinner>

</div>

